---
import { getCollection } from 'astro:content'
import BaseLayout from '~/layouts/BaseLayout.astro'
import NoteCard from '~/components/note/NoteCard.astro'
import SlideEnter from '~/components/SlideEnter.astro'

const notes = await getCollection('notes')

// 按照发布时间排序
notes.sort(
	(a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf(),
);
---

<BaseLayout>
	<main class="w-full">
		<section class="w-3/4 mx-auto mt-4">
			<ul class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4">
				{
					notes.map((note, i) => (
						<li>
							<SlideEnter delay="60ms" stagger={i}>
								<NoteCard href={`/notes/${note.slug}`} {...note.data} />
							</SlideEnter>
						</li>
					))
				}
			</ul>
		</section>
	</main>
</BaseLayout>